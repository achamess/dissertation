library(leaflet)m = leaflet() %>% addTiles()m# load example data (Fiji Earthquakes)data(quakes)# store data in GeoJSON file (just a subset here)q.dat <- toGeoJSON(data=quakes[1:99,], dest=tempdir(), name="quakes")# make style based on quake magnitudeq.style <- styleGrad(prop="mag", breaks=seq(4, 6.5, by=0.5),                     style.val=rev(heat.colors(5)), leg="Richter Magnitude",                     fill.alpha=0.7, rad=8)# create mapq.map <- leaflet(data=q.dat, dest=tempdir(), title="Fiji Earthquakes",                 base.map="mqsat", style=q.style, popup="mag")# view map in browserq.map# MAP WITH LEGEND ----# http://rstudio.github.io/leaflet/legends.htmllibrary(rgdal)library(leaflet)# From http://data.okfn.org/data/datasets/geo-boundaries-world-110mcountries <- readOGR(normalizePath('~/github/dissertation/app/test_rasterfaster/countries.geojson'), 'OGRGeoJSON')map <- leaflet(countries)pal <- colorNumeric(  palette = "Blues",  domain = countries$gdp_md_est)map %>%  addPolygons(    stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,    color = ~pal(gdp_md_est)) %>%  addLegend(    "bottomright", pal = pal, values = ~gdp_md_est,    title = "Est. GDP (2010)",    labFormat = labelFormat(prefix = "$"))